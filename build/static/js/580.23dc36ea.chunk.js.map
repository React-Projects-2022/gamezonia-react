{"version":3,"file":"static/js/580.23dc36ea.chunk.js","mappings":"8IAQA,IANgB,kBACd,iBAAMA,UAAU,UAAhB,UACE,SAAC,KAAD,CAAMC,KAAM,U,oECDHC,GAAwBC,E,QAAAA,IAAH,sZ,oICYrBC,IAb6BD,EAAAA,EAAAA,IAAH,uKAadA,EAAAA,EAAAA,IAAH,0vBA8BlBD,EAAAA,I,uCCiDJ,EAtFa,WACX,OAAiCG,EAAAA,EAAAA,GAASD,EAAW,CACnDE,UAAW,CAAEC,cAAc,EAAMC,iBAAiB,KAD5CC,EAAR,EAAQA,QAASC,EAAjB,EAAiBA,MAAOC,EAAxB,EAAwBA,KAGxB,GAAgCC,EAAAA,EAAAA,UAAS,IAAzC,eAAOC,EAAP,KAAiBC,EAAjB,KACA,GAA0CC,EAAAA,EAAAA,MAAlCC,EAAR,EAAQA,cAAeC,EAAvB,EAAuBA,gBAEvBC,EAAAA,EAAAA,YAAU,WACR,GAAMP,GAAQA,EAAKE,SAASM,aAAc,CACxC,IAAIC,EAAgB,GACpBT,EAAKE,SAASM,aAAaE,KAAI,SAACC,GAAD,OAC7BF,EAAcG,KAAK,CACjBC,GAAIF,EAAKE,GACTC,MAAOH,EAAKI,QAAQC,KACpBC,YAAaN,EAAKO,SAASF,KAC3BG,IAAKC,OAAOC,SAASC,OAAOC,OAAvB,yBAAgDZ,EAAKE,KAC1DW,WAAYb,EAAKI,QAAQU,SAG7BtB,EAAYM,MAEb,CAACT,IAEJ,IAAM0B,EAAc,SAACC,GAAD,OAAYC,EAAAA,EAAAA,GAAW,gBAAiBD,IACtDE,EAAU,SAAClB,GACf,IAAMmB,EAAexB,EAAeK,EAAKE,IACzCkB,QAAQC,IAAIF,GACZC,QAAQC,IAAR,gCAAqCrB,EAAKI,QAAQC,KAAlD,aAEA,IAAMiB,EAAgB,CACpBhB,YAAaN,EAAKO,SAASF,KAC3BH,GAAIF,EAAKE,GACTY,IAAKd,EAAKI,QAAQU,IAClBT,KAAML,EAAKI,QAAQC,KACnBkB,MAAOvB,EAAKuB,MACZC,SACmBC,IAAjBN,GAA8BO,OAAOC,KAAKR,GAAcS,OACpDT,EAAaK,IAAM,EACnB,EACNK,OAAQ,CACNC,MAAO9B,EAAKI,QAAQyB,OAAOC,MAC3BC,MAAO/B,EAAKI,QAAQyB,OAAOE,OAE7BC,MAAOhC,EAAKgC,OAEdtC,EAAc4B,IAGVW,EAAcC,EAAAA,GAAAA,cAAAA,KACpB,OACE,gCACG/C,IAAW,SAACgD,EAAA,EAAD,IACX/C,IAAS,mCAAWA,MACnBD,IAAYC,IACZ,gCACGG,EAASqC,OAAS,IAAK,SAAC,KAAD,CAAUrC,SAAUA,KAC5C,iBAAKb,UAAU,iBAAf,WACE,SAAC,KAAD,CACEyB,MAAO,gBACPiC,SAAU/C,EAAKgD,IAAIxC,aACnBkB,YAAaA,EACbG,QAASA,EACTe,YAAaA,KAEf,SAAC,KAAD,CACEK,UAAU,EACVnC,MAAO,2CACPiC,SAAU/C,EAAKkD,WAAW1C,aAC1BkB,YAAaA,EACbG,QAASA,EACTe,YAAaA,KAEf,SAAC,KAAD,CACE9B,MAAO,eACPiC,SAAU/C,EAAKmD,GAAG3C,aAClBkB,YAAaA,EACbG,QAASA,EACTe,YAAaA","sources":["components/core/Loading.js","graphql/operations/fragment/shop-product.js","graphql/operations/query/home-page.js","pages/public/Home.js"],"sourcesContent":["import { Ring } from \"react-awesome-spinners\";\n\nconst Loading = () => (\n  <span className=\"loading\">\n    <Ring size={454} />\n  </span>\n);\n\nexport default Loading;","import { gql } from \"@apollo/client\";\n\n\nexport const SHOP_PRODUCT_FRAGMENT = gql`\nfragment ShopProductObject on ShopProduct {\n  id\n  price\n  stock\n  product {\n    name\n    img\n    rating {\n      value\n      count\n    }\n    screenshoot @include(if: $relationScreens)\n  }\n  platform @include(if: $showPlatform){\n    id\n    name\n    slug\n  }\n  relationalProducts @include(if: $relationScreens) {\n    id\n    platform {\n      name\n    }\n  }\n}\n`;","import { gql } from \"@apollo/client\";\nimport { SHOP_PRODUCT_FRAGMENT } from \"./../fragment/shop-product\";\nexport const PRINCIPAL_CHARACTERS_VOTES = gql`\n  query PrincipalCharsVotes {\n    characters {\n      id\n      name\n      actor\n      total_episodes\n      votes\n      url\n    }\n  }\n`;\n\nexport const HOME_PAGE = gql`\n  query HomePageInfo(\n    $showPlatform: Boolean = false\n    $relationScreens: Boolean = false\n  ) {\n    carousel: shopProductsOffersLast(itemsPage: 6, topPrice: 30, random: true) {\n      shopProducts {\n        ...ShopProductObject\n      }\n    }\n    pc: shopProductsPlatforms(itemsPage: 4, platform: [\"4\"], random: true) {\n      shopProducts {\n        ...ShopProductObject\n      }\n    }\n    ps4: shopProductsPlatforms(itemsPage: 4, platform: [\"18\"], random: true) {\n      shopProducts {\n        ...ShopProductObject\n      }\n    }\n    topPrice35: shopProductsOffersLast(\n      itemsPage: 4\n      topPrice: 35\n      random: true\n    ) {\n      shopProducts {\n        ...ShopProductObject\n      }\n    }\n  }\n  ${SHOP_PRODUCT_FRAGMENT}\n`;\n","import { useQuery } from \"@apollo/client\";\nimport Loading from \"../../components/core/Loading\";\nimport { HOME_PAGE } from \"../../graphql/operations/query/home-page\";\nimport { navigateTo } from \"../../helpers/navigate\";\nimport { useEffect, useState } from \"react\";\n\nimport { CONSTANTS, Carousel, ProductItemGroup, useCart} from \"@mugan86/react-shop-ui\";\n// import { useCart } from \"../../react-shop-ui/hooks/useCart\";\nconst Home = () => {\n  const { loading, error, data } = useQuery(HOME_PAGE, {\n    variables: { showPlatform: true, relationScreens: false },\n  });\n  const [carousel, setCarousel] = useState([]);\n  const { manageProduct, getProductInfo } = useCart();\n\n  useEffect(() => {\n    if (!!data && data.carousel.shopProducts) {\n      let carouselItems = [];\n      data.carousel.shopProducts.map((item) =>\n        carouselItems.push({\n          id: item.id,\n          title: item.product.name,\n          description: item.platform.name,\n          url: window.location.origin.concat(`/games/details/${item.id}`),\n          background: item.product.img,\n        })\n      );\n      setCarousel(carouselItems);\n    }\n  }, [data]);\n\n  const showDetails = (params) => navigateTo(\"games/details\", params);\n  const addCart = (item) => {\n    const existProduct = getProductInfo(item.id);\n    console.log(existProduct);\n    console.log(`Add to cart one unit: ${item.product.name} product`);\n    // alert(`No implementado. ID del producto: ${itemId}`)\n    const productToCart = {\n      description: item.platform.name,\n      id: item.id,\n      img: item.product.img,\n      name: item.product.name,\n      price: item.price,\n      qty:\n        existProduct !== undefined && Object.keys(existProduct).length\n          ? existProduct.qty + 1\n          : 1,\n      rating: {\n        count: item.product.rating.count,\n        value: item.product.rating.value,\n      },\n      stock: item.stock,\n    };\n    manageProduct(productToCart);\n  };\n\n  const selectMoney = CONSTANTS.CURRENCY_LIST.EURO;\n  return (\n    <>\n      {loading && <Loading />}\n      {error && <p>Error: {error}</p>}\n      {!loading && !error && (\n        <>\n          {carousel.length > 2 && <Carousel carousel={carousel} />}\n          <div className=\"container mb-5\">\n            <ProductItemGroup\n              title={\"Juegos de PS4\"}\n              products={data.ps4.shopProducts}\n              showDetails={showDetails}\n              addCart={addCart}\n              selectMoney={selectMoney}\n            />\n            <ProductItemGroup\n              showDesc={true}\n              title={\"Juegos más económicos (<35 €)\"}\n              products={data.topPrice35.shopProducts}\n              showDetails={showDetails}\n              addCart={addCart}\n              selectMoney={selectMoney}\n            />\n            <ProductItemGroup\n              title={\"Juegos de PC\"}\n              products={data.pc.shopProducts}\n              showDetails={showDetails}\n              addCart={addCart}\n              selectMoney={selectMoney}\n            />\n          </div>\n        </>\n      )}\n    </>\n  );\n};\n\nexport default Home;\n"],"names":["className","size","SHOP_PRODUCT_FRAGMENT","gql","HOME_PAGE","useQuery","variables","showPlatform","relationScreens","loading","error","data","useState","carousel","setCarousel","useCart","manageProduct","getProductInfo","useEffect","shopProducts","carouselItems","map","item","push","id","title","product","name","description","platform","url","window","location","origin","concat","background","img","showDetails","params","navigateTo","addCart","existProduct","console","log","productToCart","price","qty","undefined","Object","keys","length","rating","count","value","stock","selectMoney","CONSTANTS","Loading","products","ps4","showDesc","topPrice35","pc"],"sourceRoot":""}